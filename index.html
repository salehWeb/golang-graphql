<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
</body>
<script>
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.classList.add('overflow-hidden');
    }

    document.addEventListener('click', (event) => {
        if (event.target.classList.contains('bg-modal')) {
            event.target.classList.remove('flex');
            event.target.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }
    });

    setTimeout(() => {
        reviewsInit()
        topScrollButtonInit()
        initContactForm()
    }, 1000)

    function reviewsInit() {
        const back = document.getElementById("review-go-back")
        const forward = document.getElementById("review-go-forward")
        const container = document.getElementById("scroll-container")


        function isAtEnd() {
            return container.scrollLeft + container.offsetWidth >= container.scrollWidth;
        }

        function isAtStart() {
            return container.scrollLeft === 0;
        }

        function goBack() {
            container.scrollTo({ left: isAtStart() ? container.scrollWidth : container.scrollLeft - 416, behavior: 'smooth' });
        }

        function goForward() {
            container.scrollTo({ left: isAtEnd() ? 0 : container.scrollLeft + 416, behavior: 'smooth' });
        }


        back.addEventListener("click", (e) => goBack())
        forward.addEventListener("click", (e) => goForward())
    }


    function handleScrollTop() {
        const heroElement = document.getElementById('home');
        const rect = heroElement.getBoundingClientRect();
        const isHeroVisible = rect.top >= 0 && rect.bottom <= window.innerHeight;

        if (isHeroVisible) document.getElementById("up-button").classList.add("hidden")
        else document.getElementById("up-button").classList.remove("hidden")
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function topScrollButtonInit() {
        handleScrollTop()
        window.addEventListener('scroll', handleScrollTop);
    }

    function initContactForm() {
        document
            .getElementById("contact-form")
            .addEventListener("submit", async (e) => {
                e.preventDefault();

                await submitContact(
                    document.getElementById("first-name").value + " " + document.getElementById("last-name").value,
                    document.getElementById("email").value,
                    document.getElementById("message").value
                )
            })
    }

</script>

</html>