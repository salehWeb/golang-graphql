<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
</body>

<script id="hamburger-menu">
    function init55() {
        const menuButton = document.getElementById('menu-button');
        const menuList = document.getElementById('menu-list');

        menuButton.addEventListener('click', () => {
            menuList.classList.toggle('-right-96');
            menuList.classList.toggle('right-0');
            menuButton.children[0].classList.toggle('rotate-45');
            menuButton.children[0].classList.toggle('translate-y-2.5');
            menuButton.children[1].classList.toggle('opacity-0');
            menuButton.children[2].classList.toggle('-rotate-45');
            menuButton.children[2].classList.toggle('-translate-y-2.5');
        });
    };

    setTimeout(() => { init55() }, 1000);
</script>

<script id="menu-carousel">
    function init() {
        /*** @type {SVGElement[]} */
        const prevElements = document.getElementsByClassName("menu-prev")
        for (const element of prevElements) {

            element.addEventListener("click", (ev) => {
                /*** @type {HTMLDivElement} */
                const container = element.parentElement.children[1];
                const isStart = container.scrollLeft === 0;

                container.scrollTo({ left: isStart ? container.scrollWidth : container.scrollLeft - 432, behavior: 'smooth' });
            })
        }

        /*** @type {SVGElement[]} */
        const nextElements = document.getElementsByClassName("menu-next")
        for (const element of nextElements) {

            element.addEventListener("click", (ev) => {
                /*** @type {HTMLDivElement} */
                const container = element.parentElement.children[1];
                const isEnd = container.scrollLeft + container.offsetWidth >= container.scrollWidth;

                container.scrollTo({ left: isEnd ? 0 : container.scrollLeft + 432, behavior: 'smooth' });
            })
        }
    }

    setTimeout(() => { init() }, 1000);
</script>

<script id="gallery-carousel">
    let currentImage;
    let isOpen = false;

    function openModal() {
        const modal = document.getElementById("bg-modal");

        modal.classList.remove('hidden');
        modal.classList.add('flex');
        isOpen = true;
    }

    function openImage(imageId) {
        currentImage = imageId;

        const img = document.getElementById("gallery-img");
        img.src = `/gallery/${currentImage}.webp`;

        if (!isOpen) openModal()
    }

    function initGalleryModal() {
        const modal = document.getElementById("bg-modal")
        const close = document.getElementById("gallery-close")
        const next = document.getElementById("gallery-next")
        const prev = document.getElementById("gallery-prev")

        function closeGalleryModal() {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
            isOpen = false;
        }

        function nextImage() {
            if (currentImage === 8) currentImage = 1
            else currentImage++

            openImage(currentImage);
        }

        function prevImage() {
            if (currentImage === 1) currentImage = 8
            else currentImage--

            openImage(currentImage);
        }

        close.addEventListener("click", closeGalleryModal)
        next.addEventListener("click", nextImage)
        prev.addEventListener("click", prevImage)
    }

    setTimeout(() => { initGalleryModal() }, 1000)
</script>

<script id="reviews-carousel">
    function reviewsInit() {
        const back = document.getElementById("review-go-back")
        const forward = document.getElementById("review-go-forward")
        const container = document.getElementById("scroll-container")


        function isAtEnd() {
            return container.scrollLeft + container.offsetWidth >= container.scrollWidth;
        }

        function isAtStart() {
            return container.scrollLeft === 0;
        }

        function goBack() {
            container.scrollTo({ left: isAtStart() ? container.scrollWidth : container.scrollLeft - 316, behavior: 'smooth' });
        }

        function goForward() {
            container.scrollTo({ left: isAtEnd() ? 0 : container.scrollLeft + 316, behavior: 'smooth' });
        }


        back.addEventListener("click", (e) => goBack())
        forward.addEventListener("click", (e) => goForward())
    }

    setTimeout(() => { reviewsInit() }, 1000)
</script>

<script id="contact-form">
    function initContactForm() {
        document
            .getElementById("contact-form")
            .addEventListener("submit", async (e) => {
                e.preventDefault();

                await submitContact(
                    document.getElementById("first-name").value + " " + document.getElementById("last-name").value,
                    document.getElementById("email").value,
                    document.getElementById("message").value
                )
            })
    }

    setTimeout(() => { initContactForm() }, 1000)
</script>

<script id="top-scroll-button">
    function handleScrollTop() {
        const heroElement = document.getElementById('home');
        const rect = heroElement.getBoundingClientRect();
        const isHeroVisible = rect.top >= 0 && rect.bottom <= window.innerHeight;

        if (isHeroVisible) document.getElementById("up-button").classList.add("hidden")
        else document.getElementById("up-button").classList.remove("hidden")
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function topScrollButtonInit() {
        handleScrollTop()
        window.addEventListener('scroll', handleScrollTop);
    }

    setTimeout(() => { topScrollButtonInit() }, 1000)
</script>

</html>